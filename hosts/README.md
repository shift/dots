# nixos-facter Integration

This directory implements hardware configuration using [nixos-facter](https://github.com/nix-community/nixos-facter), a standardized hardware detection tool for NixOS.

## Structure

```
hosts/
└── shulkerbox/
    ├── default.nix      # Host-specific configuration
    └── facter.json      # Hardware detection data generated by nixos-facter
```

## How it Works

1. **Hardware Detection**: The `facter.json` file contains hardware information that would typically be generated by running nixos-facter on the target system
2. **Automatic Configuration**: nixos-facter reads this data and automatically configures appropriate drivers, modules, and hardware settings
3. **Manual Overrides**: The `default.nix` file contains host-specific configuration that isn't handled by automatic detection

## facter.json

This file contains structured hardware information including:
- CPU details (vendor, architecture, features)
- Graphics hardware (vendor, driver, PCI IDs)
- Network interfaces (WiFi, Ethernet)
- Audio devices
- Bluetooth adapters
- Storage devices
- Input devices (fingerprint readers, etc.)
- Kernel modules required for hardware

## Benefits

- **Standardized**: Uses the established nix-community tool rather than custom implementations
- **Automatic**: Hardware-specific configuration is generated automatically
- **Maintainable**: Changes to hardware detection logic are handled upstream
- **Consistent**: Same approach can be used across multiple hosts

## Generating facter.json

On the target hardware, you would typically run:
```bash
nixos-facter > facter.json
```

This generates the hardware detection data that nixos-facter uses for automatic configuration.